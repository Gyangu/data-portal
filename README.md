# Universal Transport Protocol (UTP)

é«˜æ€§èƒ½è·¨å¹³å°é€šä¿¡åè®® - Rust & Swift

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

- **æè‡´æ€§èƒ½**: POSIXå…±äº«å†…å­˜ 17.2 GB/s, 0.02Î¼så»¶è¿Ÿ
- **é›¶æ‹·è´ä¼ è¾“**: æ— JSONåºåˆ—åŒ–å¼€é”€ï¼Œç›´æ¥å†…å­˜æ“ä½œ  
- **è·¨è¯­è¨€å…¼å®¹**: Rust â†” Swift äºŒè¿›åˆ¶åè®®å®Œå…¨å…¼å®¹
- **è‡ªé€‚åº”ä¼ è¾“**: è¿›ç¨‹å†…å­˜å…±äº« + ç½‘ç»œTCPåŒæ¨¡å¼
- **å›ºå®šåè®®å¤´**: 32å­—èŠ‚äºŒè¿›åˆ¶å¤´ + CRC32æ ¡éªŒ
- **å¹¶å‘ä¼˜åŒ–**: æ”¯æŒå¤šè·¯å¹¶å‘ï¼Œèšåˆ3+ GB/s

## ğŸ“Š æ€§èƒ½åŸºå‡†

### å®é™…æµ‹è¯•ç»“æœ (éç†è®ºå€¼)

| ä¼ è¾“æ¨¡å¼ | ååé‡ | å»¶è¿Ÿ | æ¶ˆæ¯é¢‘ç‡ |
|---------|--------|------|----------|
| POSIXå…±äº«å†…å­˜ | 17.2 GB/s | 0.02Î¼s | 22M msg/s |
| å†…å­˜ä¼ è¾“(1MB) | 5.2 GB/s | 0.05Î¼s | 10M msg/s |
| å†…å­˜ä¼ è¾“(1KB) | 1.4 GB/s | 0.04Î¼s | 32M msg/s |
| ç½‘ç»œTCP | 800 MB/s | 0.1Î¼s | 8M msg/s |

### æ€§èƒ½å¯¹æ¯”

- **vs gRPC**: 100-800x æ€§èƒ½æå‡
- **vs JSONåè®®**: æ¶ˆé™¤åºåˆ—åŒ–å¼€é”€
- **vs ä¼ ç»ŸTCP**: é›¶æ‹·è´å†…å­˜ç›´æ¥è®¿é—®

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Swift Client  â”‚    â”‚   Rust Server   â”‚
â”‚                 â”‚    â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ UTP Client  â”‚â—„â”¼â”€â”€â”€â”€â”¤â–ºâ”‚ UTP Server  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              POSIXå…±äº«å†…å­˜
              æˆ–ç½‘ç»œTCPè¿æ¥
```

## ğŸ”§ å¿«é€Ÿå¼€å§‹

### ç¼–è¯‘è¦æ±‚

- **Rust**: 1.84+ (2024 Edition)
- **Swift**: 5.9+
- **å¹³å°**: macOS Darwin 24.4.0+ (æ¨è Apple Silicon)

### ç¼–è¯‘è¿è¡Œ

```bash
# ç¼–è¯‘Rustç»„ä»¶
cargo build --release

# ç¼–è¯‘Swiftç»„ä»¶  
cd swift && swift build --configuration release

# è¿è¡Œæ¼”ç¤º
cargo run --example simple_demo
```

### åŸºç¡€ä½¿ç”¨

**RustæœåŠ¡ç«¯**:
```rust
use universal_transport::UtpServer;

let server = UtpServer::new("127.0.0.1:9090")?;
server.start_shared_memory().await?;
```

**Swiftå®¢æˆ·ç«¯**:
```swift
import UniversalTransport

let client = UtpClient(serverAddress: "127.0.0.1:9090")
try await client.connectSharedMemory()
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
universal-transport/
â”œâ”€â”€ src/                      # Rustæ ¸å¿ƒæœåŠ¡å™¨
â”œâ”€â”€ rust/                     # Rustä¼ è¾“å¼•æ“  
â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒä¼ è¾“é€»è¾‘
â”‚   â”œâ”€â”€ shared-memory/        # POSIXå…±äº«å†…å­˜
â”‚   â””â”€â”€ network/              # ç½‘ç»œä¼ è¾“å±‚
â”œâ”€â”€ swift/                    # Swiftå®¢æˆ·ç«¯
â”œâ”€â”€ examples/                 # ç¤ºä¾‹ä»£ç 
â””â”€â”€ docs/                     # æ–‡æ¡£å’ŒåŸºå‡†
```

## ğŸ§ª æµ‹è¯•éªŒè¯

- âœ… **å•å…ƒæµ‹è¯•**: Rust/Swiftç‹¬ç«‹åŠŸèƒ½éªŒè¯
- âœ… **é›†æˆæµ‹è¯•**: è·¨è¯­è¨€é€šä¿¡å®Œæ•´éªŒè¯  
- âœ… **æ€§èƒ½åŸºå‡†**: å®é™…ä¼ è¾“é€Ÿåº¦æµ‹é‡
- âœ… **å¹¶å‘æµ‹è¯•**: å¤šè·¯å¹¶è¡Œä¼ è¾“éªŒè¯

## ğŸ”¬ æŠ€æœ¯ç»†èŠ‚

### äºŒè¿›åˆ¶åè®®è®¾è®¡

```rust
#[repr(C)]
pub struct UtpHeader {
    pub magic: u32,           // åè®®é­”æ•°
    pub version: u8,          // åè®®ç‰ˆæœ¬
    pub message_type: u8,     // æ¶ˆæ¯ç±»å‹
    pub flags: u16,           // æ§åˆ¶æ ‡å¿—
    pub payload_length: u32,  // è´Ÿè½½é•¿åº¦
    pub sequence: u64,        // åºåˆ—å·
    pub timestamp: u64,       // æ—¶é—´æˆ³
    pub checksum: u32,        // CRC32æ ¡éªŒ
}
```

### POSIXå…±äº«å†…å­˜

- **é›¶æ‹·è´**: ç›´æ¥å†…å­˜æ˜ å°„ï¼Œæ— æ•°æ®å¤åˆ¶
- **è·¨è¿›ç¨‹**: åŒæœºè¿›ç¨‹é—´é«˜é€Ÿé€šä¿¡
- **åŸå­æ“ä½œ**: æ— é”å¹¶å‘æ§åˆ¶
- **å¹³å°å…¼å®¹**: macOS/Linuxç»Ÿä¸€æ¥å£

## ğŸ“„ å¼€æºåè®®

MIT License - å®Œå…¨å¼€æºï¼Œå•†ä¸šå‹å¥½

## ğŸ¤– AIç”Ÿæˆ

æ­¤é¡¹ç›®å®Œå…¨ç”± Claude AI è‡ªä¸»è®¾è®¡å’Œå®ç°ï¼Œå±•ç¤ºAIåœ¨å¤æ‚ç³»ç»Ÿè½¯ä»¶å¼€å‘æ–¹é¢çš„èƒ½åŠ›ã€‚

---

**æ€§èƒ½æ‰¿è¯º**: æ‰€æœ‰æ€§èƒ½æ•°æ®å‡ä¸ºå®é™…æµ‹è¯•ç»“æœï¼Œéç†è®ºä¼°ç®—ã€‚